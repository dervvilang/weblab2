import"./style-BZ5FMwGp.js";const y=document.getElementById("book-form"),p=document.getElementById("book-query"),r=document.getElementById("book-results"),h=document.getElementById("book-item");y.addEventListener("submit",async d=>{d.preventDefault();const n=p.value.trim();if(n){r.innerHTML=`<div class="card">Ищу книги по запросу: <b>${n}</b>…</div>`;try{const o=`https://openlibrary.org/search.json?q=${encodeURIComponent(n)}&limit=20`,i=await fetch(o);if(!i.ok)throw new Error("Ошибка ответа Open Library");const s=await i.json();if(!s.docs||s.docs.length===0){r.innerHTML='<div class="card">Ничего не найдено.</div>';return}r.innerHTML="",s.docs.forEach(e=>{const t=h.content.cloneNode(!0),a=e.title||"Без названия",u=e.author_name&&e.author_name.join(", ")||"Автор не указан",m=e.first_publish_year||"—",l=e.cover_i;t.querySelector(".title").textContent=a,t.querySelector(".meta").textContent=`${u} • ${m}`,t.querySelector(".link").href=`https://openlibrary.org${e.key}`;const c=t.querySelector(".cover");l?(c.src=`https://covers.openlibrary.org/b/id/${l}-M.jpg`,c.alt=`Обложка: ${a}`):c.remove(),r.appendChild(t)})}catch(o){r.innerHTML=`<div class="card">Ошибка: ${o.message}</div>`}}});
