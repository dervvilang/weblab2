import"./style-BZ5FMwGp.js";const v=document.getElementById("wx-form"),t=document.getElementById("wx-result"),$=document.getElementById("wx-card");v.addEventListener("submit",async i=>{i.preventDefault();const n=document.getElementById("city").value.trim();if(n){t.innerHTML=`<div class="card">Ищу координаты для: <b>${n}</b>…</div>`;try{const o=`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(n)}&count=1&language=ru&format=json`,c=await fetch(o);if(!c.ok)throw new Error("Ошибка геокодинга");const r=await c.json();if(!r.results||r.results.length===0){t.innerHTML='<div class="card">Город не найден.</div>';return}const d=r.results[0],{latitude:m,longitude:l,name:u,country:w}=d,g=`https://api.open-meteo.com/v1/forecast?latitude=${m}&longitude=${l}&current_weather=true&hourly=temperature_2m&forecast_days=1&timezone=auto`,a=await fetch(g);if(!a.ok)throw new Error("Ошибка прогноза");const p=await a.json();t.innerHTML="";const s=$.content.cloneNode(!0);s.querySelector(".title").textContent=`${u}, ${w}`;const e=p.current_weather,h=(e==null?void 0:e.temperature)??"—",y=(e==null?void 0:e.windspeed)??"—",f=(e==null?void 0:e.time)??"";s.querySelector(".meta").innerHTML=`
      Сейчас: <b>${h} °C</b>, ветер ${y} км/ч<br/>
      Обновлено: ${f}
    `,t.appendChild(s)}catch(o){t.innerHTML=`<div class="card">Ошибка: ${o.message}</div>`}}});
